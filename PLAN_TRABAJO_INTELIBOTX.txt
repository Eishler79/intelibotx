===============================================================================
                    PLAN DE TRABAJO DETALLADO - INTELIBOTX
                        CONSOLIDACIÃ“N CON PRIORIDAD BOTS
===============================================================================

FECHA CREACIÃ“N: 31-Julio-2025
ESTRATEGIA: Enfoque pragmÃ¡tico incremental con test-first approach
PRIORIDAD: Funcionalidad de Bots como frente principal
ESTRUCTURA: Mantener intelibotx-api/ e intelibotx-ui/ separados

===============================================================================
                               ESTADO ACTUAL
===============================================================================

âœ… ANÃLISIS COMPLETADO:
- Backend: Arquitectura sÃ³lida con 11 issues crÃ­ticos identificados
- Frontend: Componentes bots desarrollados, integraciÃ³n parcial
- Coherencia API/UI: Evaluada con gaps especÃ­ficos documentados
- Issues totales: 22 inconsistencias priorizadas

ğŸ¯ OBJETIVO: Sistema de bots funcional con datos test, preparado para migraciÃ³n a datos reales

===============================================================================
                            ETAPA 1 - FIXES CRÃTICOS
                              STATUS: â³ PENDIENTE
                              DURACIÃ“N: 1 dÃ­a
                              PRIORIDAD: ğŸ”´ CRÃTICA
===============================================================================

ğŸ”§ BACKEND CRITICAL FIXES:

1.1 ARREGLAR IMPORTACIONES ROTAS [routes/bots.py]
    ğŸ“ Archivo: intelibotx-api/routes/bots.py:12-15
    âŒ Problema: from services.strategy_evaluator import evaluate_strategy  # NO EXISTE
    âœ… SoluciÃ³n: Usar analytics/strategy_evaluator.py StrategyEvaluator.evaluate()
    â±ï¸ Tiempo: 30 min
    ğŸ§ª Test: Verificar endpoints bots funcionan sin errores importaciÃ³n

1.2 CONSOLIDAR DATABASE ENGINE 
    ğŸ“ Archivos: db/database.py (completo) vs db/sqlite.py (solo engine)
    âŒ Problema: routes/bots.py usa db.sqlite, main.py usa db.database
    âœ… SoluciÃ³n: Migrar todo a db/database.py, eliminar db/sqlite.py
    â±ï¸ Tiempo: 45 min
    ğŸ§ª Test: Verificar conexiÃ³n DB desde main.py y routes/bots.py

1.3 ELIMINAR STRATEGY_EVALUATOR DUPLICADO
    ğŸ“ Archivos: services/strategy_evaluator.py vs analytics/strategy_evaluator.py
    âŒ Problema: FunciÃ³n simple vs clase completa
    âœ… SoluciÃ³n: Mantener analytics/, eliminar services/, actualizar imports
    â±ï¸ Tiempo: 20 min
    ğŸ§ª Test: Importaciones funcionan correctamente

1.4 LIMPIAR ARCHIVOS DUPLICADOS
    ğŸ“ Archivo: intelligence/smart_trade_intelligence 2.py
    âŒ Problema: Archivo duplicado confuso
    âœ… SoluciÃ³n: Revisar diferencias, mantener el correcto, eliminar duplicado
    â±ï¸ Tiempo: 15 min
    ğŸ§ª Test: Sin errores de importaciÃ³n en intelligence/

ğŸ–¥ï¸ FRONTEND CRITICAL FIXES:

1.5 IMPLEMENTAR PÃGINA BOTS.JSX
    ğŸ“ Archivo: intelibotx-ui/src/pages/Bots.jsx
    âŒ Problema: Solo contiene placeholder "GestiÃ³n de bots"
    âœ… SoluciÃ³n: Usar components/bots/BotList.tsx + BotForm.tsx
    â±ï¸ Tiempo: 1 hora
    ğŸ§ª Test: PÃ¡gina muestra lista de bots y formulario creaciÃ³n

1.6 CONSOLIDAR SMARTTRADE DUPLICADO
    ğŸ“ Archivos: pages/SmartTrade.jsx vs components/SmartTradePanel.tsx
    âŒ Problema: CÃ³digo casi idÃ©ntico, violando DRY
    âœ… SoluciÃ³n: PÃ¡gina usa componente, eliminar lÃ³gica duplicada
    â±ï¸ Tiempo: 45 min
    ğŸ§ª Test: SmartTrade funciona igual que antes

1.7 CORREGIR URLs API FRONTEND
    ğŸ“ Archivo: intelibotx-ui/src/services/api.ts
    âŒ Problema: Algunos endpoints usan /api/ local en lugar de backend
    âœ… SoluciÃ³n: Usar BASE_URL consistentemente para todos los endpoints
    â±ï¸ Tiempo: 30 min
    ğŸ§ª Test: Todas las llamadas API van al backend Railway

ğŸ“Š DELIVERABLES ETAPA 1:
- âœ… Backend sin errores de importaciÃ³n
- âœ… Database engine unificado
- âœ… PÃ¡gina Bots funcional con componentes existentes
- âœ… APIs frontend apuntando al backend correcto
- âœ… Sin archivos duplicados

===============================================================================
                          ETAPA 2 - BOT ENGINE CORE
                             STATUS: â³ PENDIENTE  
                             DURACIÃ“N: 2-3 dÃ­as
                             PRIORIDAD: ğŸ¤– ALTA
===============================================================================

ğŸ”§ MOTOR DE EJECUCIÃ“N DE BOTS:

2.1 CREAR BOT ENGINE FUNCIONAL
    ğŸ“ Archivo: intelibotx-api/services/bot_engine.py (nuevo)
    ğŸ¯ Objetivo: Motor que ejecute bots con datos test
    âœ… Funcionalidad:
        - Leer configuraciÃ³n bot desde DB
        - Ejecutar anÃ¡lisis tÃ©cnico (usar analytics/ existente)
        - Simular decisiones compra/venta
        - Calcular mÃ©tricas: PnL, winrate, drawdown
        - Guardar resultados en DB
    â±ï¸ Tiempo: 1.5 dÃ­as
    ğŸ§ª Test: Bot creado puede ejecutarse y generar mÃ©tricas

2.2 SISTEMA ESTADOS DE BOTS
    ğŸ“ Archivo: models/bot_config.py (actualizar)
    ğŸ¯ Objetivo: Tracking de estados bot
    âœ… Estados: STOPPED, RUNNING, ERROR, PAUSED
    âœ… Funcionalidad:
        - API endpoints para start/stop bot
        - Persistencia estado en DB
        - UI refleja estado actual
    â±ï¸ Tiempo: 4 horas
    ğŸ§ª Test: Estado bot se actualiza correctamente API/UI

2.3 BACKTEST REAL CON DATOS HISTÃ“RICOS
    ğŸ“ Archivo: services/backtest_service.py (mejorar existente)
    ğŸ¯ Objetivo: Backtesting funcional con mÃ©tricas reales
    âœ… Funcionalidad:
        - Usar data/btcusdt_15m.csv existente
        - Aplicar strategy_evaluator real
        - Calcular mÃ©tricas: Sharpe, Max DD, Total Return
        - Generar puntos entrada/salida
    â±ï¸ Tiempo: 1 dÃ­a
    ğŸ§ª Test: Backtest genera mÃ©tricas realistas

2.4 DASHBOARD BOTS CON MÃ‰TRICAS
    ğŸ“ Archivo: intelibotx-ui/src/components/bots/BotCard.tsx (mejorar)
    ğŸ¯ Objetivo: Mostrar mÃ©tricas reales calculadas
    âœ… Funcionalidad:
        - GrÃ¡fico equity curve
        - MÃ©tricas numÃ©ricas: ROI, Win%, Sharpe
        - Estado actual bot
        - Botones start/stop funcionales
    â±ï¸ Tiempo: 6 horas
    ğŸ§ª Test: Dashboard muestra datos reales del backtest

ğŸ“Š DELIVERABLES ETAPA 2:
- âœ… Bots ejecutables con datos test
- âœ… MÃ©tricas reales calculadas
- âœ… Estados de bot funcionales
- âœ… Dashboard informativo

===============================================================================
                        ETAPA 3 - INTEGRATION & POLISH
                           STATUS: â³ PENDIENTE
                           DURACIÃ“N: 1-2 dÃ­as  
                           PRIORIDAD: ğŸ”— MEDIA
===============================================================================

ğŸ”Œ INTEGRACIÃ“N COMPLETA:

3.1 WEBSOCKET BÃSICO PARA UPDATES
    ğŸ“ Archivo: intelibotx-api/main.py (agregar WebSocket)
    ğŸ¯ Objetivo: Updates tiempo real estado bots
    âœ… Funcionalidad:
        - WebSocket endpoint /ws/bots
        - Notificar cambios estado bot
        - Frontend suscribe a updates
    â±ï¸ Tiempo: 4 horas
    ğŸ§ª Test: Estado bot se actualiza en tiempo real UI

3.2 ERROR HANDLING ROBUSTO
    ğŸ“ Archivos: api/ endpoints + frontend components
    ğŸ¯ Objetivo: Manejo elegante de errores
    âœ… Funcionalidad:
        - Try/catch en todas las operaciones crÃ­ticas
        - Mensajes error informativos
        - Recovery automÃ¡tico donde posible
    â±ï¸ Tiempo: 3 horas
    ğŸ§ª Test: Sistema maneja errores sin crashes

3.3 TESTING CON DATOS SIMULADOS
    ğŸ“ Archivo: tests/ (crear estructura bÃ¡sica)
    ğŸ¯ Objetivo: Tests automatizados funcionalidad core
    âœ… Funcionalidad:
        - Tests unitarios bot_engine
        - Tests integraciÃ³n API bots
        - Tests UI componentes bots
    â±ï¸ Tiempo: 4 horas
    ğŸ§ª Test: Suite test pasa al 100%

3.4 DOCUMENTACIÃ“N SISTEMA BOTS
    ğŸ“ Archivo: docs/bots.md (nuevo)
    ğŸ¯ Objetivo: DocumentaciÃ³n clara funcionamiento
    âœ… Contenido:
        - CÃ³mo crear un bot
        - CÃ³mo interpretar mÃ©tricas
        - Troubleshooting comÃºn
    â±ï¸ Tiempo: 2 horas
    ğŸ§ª Test: DocumentaciÃ³n precisa y Ãºtil

ğŸ“Š DELIVERABLES ETAPA 3:
- âœ… Sistema robusto con error handling
- âœ… Updates tiempo real
- âœ… Tests automatizados bÃ¡sicos
- âœ… DocumentaciÃ³n completa

===============================================================================
                      ETAPA 4 - SMARTTRADE MAINTENANCE
                         STATUS: â³ PENDIENTE
                         DURACIÃ“N: Paralelo a otras etapas
                         PRIORIDAD: ğŸ“ˆ BAJA
===============================================================================

ğŸ”§ MANTENIMIENTO SMARTTRADE:

4.1 MANTENER FUNCIONALIDAD EXISTENTE
    ğŸ“ Archivos: smarttrade/ (todos)
    ğŸ¯ Objetivo: No romper funcionalidad actual
    âœ… Acciones: Solo bugfixes crÃ­ticos, sin nuevas features
    â±ï¸ Tiempo: Ad-hoc
    ğŸ§ª Test: SmartTrade sigue funcionando

4.2 MEJORAS MENORES UX
    ğŸ“ Archivo: pages/SmartTrade.jsx
    ğŸ¯ Objetivo: Polish UI existente
    âœ… Funcionalidad: Mejorar responsive, loading states
    â±ï¸ Tiempo: 2 horas
    ğŸ§ª Test: UX mejorada sin cambios funcionales

4.3 INTEGRACIÃ“N ANALYTICS MEJORADA
    ğŸ“ Archivo: services/smart_trade_service.py
    ğŸ¯ Objetivo: Mejor uso analytics/ existente
    âœ… Funcionalidad: MÃ¡s indicadores, mejor scoring
    â±ï¸ Tiempo: 3 horas
    ğŸ§ª Test: SeÃ±ales SmartTrade mÃ¡s precisas

ğŸ“Š DELIVERABLES ETAPA 4:
- âœ… SmartTrade estable y funcional
- âœ… UX mejorada
- âœ… Analytics integrados

===============================================================================
                              CRONOGRAMA TOTAL
===============================================================================

ğŸ“… DÃA 1: ETAPA 1 - Fixes CrÃ­ticos (Completa)
ğŸ“… DÃA 2-3: ETAPA 2.1-2.2 - Bot Engine + Estados  
ğŸ“… DÃA 4: ETAPA 2.3-2.4 - Backtest + Dashboard
ğŸ“… DÃA 5: ETAPA 3.1-3.2 - WebSocket + Error Handling
ğŸ“… DÃA 6: ETAPA 3.3-3.4 - Testing + DocumentaciÃ³n

TOTAL: 6 dÃ­as de desarrollo efectivo

===============================================================================
                              PUNTO DE INICIO
===============================================================================

ğŸš€ INICIO CONFIRMADO: ETAPA 1 - FIXES CRÃTICOS

ğŸ“ PRIMER TASK: Arreglar importaciones rotas en routes/bots.py
ğŸ“‚ ARCHIVO: /Users/eduardguzman/Documents/TRADING/AplicaciÃ³n Trading Avanzado/intelibotx-api/routes/bots.py
ğŸ¯ OBJETIVO: Resolver import evaluate_strategy que no existe

â° SIGUIENTE ACCIÃ“N: Ejecutar plan con confirmaciÃ³n de comandos

===============================================================================
                                  NOTAS
===============================================================================

âœ… ENFOQUE: Test-first con datos simulados/histÃ³ricos
âœ… ESTRUCTURA: Mantener separaciÃ³n intelibotx-api/ e intelibotx-ui/
âœ… PRIORIDAD: Bots como frente principal, SmartTrade en mantenimiento
âœ… CALIDAD: Cada etapa incluye testing y validaciÃ³n
âœ… DOCUMENTACIÃ“N: Actualizaciones continuas CLAUDE.md

ğŸ”„ ITERACIÃ“N: Plan puede ajustarse segÃºn hallazgos durante desarrollo
ğŸ“ TRACKING: Todo task con file paths, timeboxing y tests especÃ­ficos
ğŸ¯ OBJETIVO FINAL: Sistema bots completamente funcional con test data

===============================================================================
                                 FIN PLAN
===============================================================================