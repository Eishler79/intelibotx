===============================================================================
                    PLAN DE TRABAJO DETALLADO - INTELIBOTX
                        CONSOLIDACIÓN CON PRIORIDAD BOTS
===============================================================================

FECHA CREACIÓN: 31-Julio-2025
ESTRATEGIA: Enfoque pragmático incremental con test-first approach
PRIORIDAD: Funcionalidad de Bots como frente principal
ESTRUCTURA: Mantener intelibotx-api/ e intelibotx-ui/ separados

===============================================================================
                               ESTADO ACTUAL
===============================================================================

✅ ANÁLISIS COMPLETADO:
- Backend: Arquitectura sólida con 11 issues críticos identificados
- Frontend: Componentes bots desarrollados, integración parcial
- Coherencia API/UI: Evaluada con gaps específicos documentados
- Issues totales: 22 inconsistencias priorizadas

✅ ETAPA 1 COMPLETADA (01-05 Agosto 2025):
- 10 fixes críticos implementados exitosamente
- Migración completa a estructura INTELIBOTX/backend + frontend
- Testing sistemático de 14 endpoints (10/10 core funcionando)
- APIs completamente validadas y funcionales
- Sistema listo para deployment limpio

🎯 OBJETIVO ACTUALIZADO: Sistema en producción funcionando, iniciando ETAPA 2A (Bots IA Inteligentes)

===============================================================================
                            ETAPA 1 - FIXES CRÍTICOS
                              STATUS: ✅ COMPLETADA
                              DURACIÓN: 4 días (01-05 Agosto)
                              PRIORIDAD: 🔴 CRÍTICA
===============================================================================

🔧 BACKEND CRITICAL FIXES COMPLETADOS:

1.1 ✅ ARREGLAR IMPORTACIONES ROTAS [routes/bots.py]
    📍 Archivo: backend/routes/bots.py:5
    ✅ Solucionado: analytics.strategy_evaluator StrategyEvaluator
    ✅ Resultado: Endpoints bots funcionan sin errores

1.2 ✅ CONSOLIDAR DATABASE ENGINE 
    📍 Archivos: db/database.py unificado
    ✅ Solucionado: Eliminado db/sqlite.py, todo usa db/database.py
    ✅ Resultado: Conexión DB unificada y estable

1.3 ✅ ELIMINAR STRATEGY_EVALUATOR DUPLICADO
    📍 Archivos: Solo analytics/strategy_evaluator.py
    ✅ Solucionado: Eliminado services/, actualizados imports
    ✅ Resultado: Importaciones funcionan correctamente

1.4 ✅ LIMPIAR ARCHIVOS DUPLICADOS
    📍 Archivo: Eliminados duplicados en intelligence/
    ✅ Solucionado: Archivos duplicados eliminados
    ✅ Resultado: Sin errores de importación

1.8 ✅ NUEVO: CORREGIR RUTAS TESTNET
    📍 Archivo: main.py - routes/testnet.py
    ✅ Solucionado: Eliminado prefijo duplicado /testnet/testnet/
    ✅ Resultado: Rutas testnet correctas

1.9 ✅ NUEVO: VARIABLES ENTORNO TESTNET
    📍 Archivo: services/http_testnet_service.py
    ✅ Solucionado: BINANCE_TESTNET_API_SECRET corregido
    ✅ Resultado: Variables cargadas correctamente

1.10 ✅ NUEVO: TESTING SISTEMÁTICO APIS
     📍 Validación: 14 endpoints probados sistemáticamente
     ✅ Solucionado: 10/10 core endpoints funcionando 100%
     ✅ Resultado: Sistema completamente validado

🖥️ FRONTEND CRITICAL FIXES COMPLETADOS:

1.5 ✅ IMPLEMENTAR PÁGINA BOTS.JSX
    📍 Archivo: frontend/src/pages/Bots.jsx
    ✅ Solucionado: Integración BotList.tsx + BotForm.tsx
    ✅ Resultado: Página funcional con CRUD completo

1.6 ✅ CONSOLIDAR SMARTTRADE DUPLICADO
    📍 Archivos: SmartTrade.jsx optimizado
    ✅ Solucionado: Eliminada lógica duplicada
    ✅ Resultado: SmartTrade funciona correctamente

1.7 ✅ CORREGIR URLs API FRONTEND
    📍 Archivo: frontend/src/services/api.ts
    ✅ Solucionado: BASE_URL consistente en todos endpoints
    ✅ Resultado: Comunicación API/Frontend exitosa

📊 DELIVERABLES ETAPA 1 - COMPLETADOS:
- ✅ Backend sin errores de importación
- ✅ Database engine unificado  
- ✅ Página Bots funcional con componentes existentes
- ✅ APIs frontend apuntando al backend correcto
- ✅ Sin archivos duplicados
- ✅ Estructura migrada a INTELIBOTX/backend + frontend
- ✅ Testing sistemático 14 endpoints
- ✅ Sistema completamente validado y funcional

===============================================================================
                        ETAPA 2A - BOTS IA INTELIGENTES
                             STATUS: 🚀 INICIANDO  
                             DURACIÓN: 4-5 días
                             PRIORIDAD: 🧠 MÁXIMA
                             OBJETIVO: Superior a 3Commas
===============================================================================

🧠 INTERFAZ AVANZADA DE BOTS IA - SUPERIOR A 3COMMAS:

2A.1 DASHBOARD AVANZADO CON MÉTRICAS PROFESIONALES
    📍 Archivo: frontend/src/pages/BotsAdvanced.jsx (nuevo)
    🎯 Objetivo: Dashboard profesional con visualizaciones
    ✅ Funcionalidad:
        - Grid de bots con métricas avanzadas
        - Performance cards con Sharpe, Sortino, Calmar
        - Gráficos de equity curve en tiempo real
        - Control dinámico de parámetros
        - Estados visuales (RUNNING, PAUSED, ERROR)
    ⏱️ Tiempo: 1.5 días
    🧪 Test: Dashboard muestra métricas profesionales

2A.2 INTEGRACIÓN TRADINGVIEW CHARTS
    📍 Archivo: frontend/src/components/TradingViewWidget.jsx (nuevo)
    🎯 Objetivo: Charts profesionales integrados
    ✅ Funcionalidad:
        - Widget TradingView embedded
        - Sincronización con bot activo
        - Indicators overlay automático
        - Multi-timeframe support
        - Análisis técnico visual
    ⏱️ Tiempo: 1 día
    🧪 Test: Charts se muestran correctamente integrados

2A.3 SISTEMA DE CONTROL DINÁMICO DE PARÁMETROS
    📍 Archivo: frontend/src/components/BotControlPanel.jsx (nuevo)
    🎯 Objetivo: Control en tiempo real de parámetros
    ✅ Funcionalidad:
        - Sliders para TP/SL dinámicos
        - Risk management controls
        - Position sizing automático
        - Market condition adaptation
        - Real-time parameter updates
    ⏱️ Tiempo: 1 día
    🧪 Test: Parámetros se actualizan en tiempo real

2A.4 MÉTRICAS AVANZADAS Y PERFORMANCE ANALYTICS
    📍 Archivo: frontend/src/components/AdvancedMetrics.jsx (nuevo)
    🎯 Objetivo: Métricas profesionales de trading
    ✅ Funcionalidad:
        - Sharpe Ratio calculation
        - Sortino Ratio analysis
        - Maximum Drawdown tracking
        - Calmar Ratio computation
        - Win Rate & Profit Factor
        - Risk-adjusted returns
    ⏱️ Tiempo: 1 día
    🧪 Test: Métricas se calculan correctamente

2.3 BACKTEST REAL CON DATOS HISTÓRICOS
    📍 Archivo: services/backtest_service.py (mejorar existente)
    🎯 Objetivo: Backtesting funcional con métricas reales
    ✅ Funcionalidad:
        - Usar data/btcusdt_15m.csv existente
        - Aplicar strategy_evaluator real
        - Calcular métricas: Sharpe, Max DD, Total Return
        - Generar puntos entrada/salida
    ⏱️ Tiempo: 1 día
    🧪 Test: Backtest genera métricas realistas

2.4 DASHBOARD BOTS CON MÉTRICAS
    📍 Archivo: intelibotx-ui/src/components/bots/BotCard.tsx (mejorar)
    🎯 Objetivo: Mostrar métricas reales calculadas
    ✅ Funcionalidad:
        - Gráfico equity curve
        - Métricas numéricas: ROI, Win%, Sharpe
        - Estado actual bot
        - Botones start/stop funcionales
    ⏱️ Tiempo: 6 horas
    🧪 Test: Dashboard muestra datos reales del backtest

📊 DELIVERABLES ETAPA 2A - BOTS IA INTELIGENTES:
- ✅ Dashboard avanzado superior a 3Commas
- ✅ TradingView charts integrados profesionalmente
- ✅ Control dinámico de parámetros en tiempo real
- ✅ Métricas avanzadas (Sharpe, Sortino, Calmar)
- ✅ Visualizaciones interactivas de performance
- ✅ Sistema de estados inteligente
- ✅ Interfaz responsive y profesional

===============================================================================
                        ETAPA 3 - INTEGRATION & POLISH
                           STATUS: ⏳ PENDIENTE
                           DURACIÓN: 1-2 días  
                           PRIORIDAD: 🔗 MEDIA
===============================================================================

🔌 INTEGRACIÓN COMPLETA:

3.1 WEBSOCKET BÁSICO PARA UPDATES
    📍 Archivo: intelibotx-api/main.py (agregar WebSocket)
    🎯 Objetivo: Updates tiempo real estado bots
    ✅ Funcionalidad:
        - WebSocket endpoint /ws/bots
        - Notificar cambios estado bot
        - Frontend suscribe a updates
    ⏱️ Tiempo: 4 horas
    🧪 Test: Estado bot se actualiza en tiempo real UI

3.2 ERROR HANDLING ROBUSTO
    📍 Archivos: api/ endpoints + frontend components
    🎯 Objetivo: Manejo elegante de errores
    ✅ Funcionalidad:
        - Try/catch en todas las operaciones críticas
        - Mensajes error informativos
        - Recovery automático donde posible
    ⏱️ Tiempo: 3 horas
    🧪 Test: Sistema maneja errores sin crashes

3.3 TESTING CON DATOS SIMULADOS
    📍 Archivo: tests/ (crear estructura básica)
    🎯 Objetivo: Tests automatizados funcionalidad core
    ✅ Funcionalidad:
        - Tests unitarios bot_engine
        - Tests integración API bots
        - Tests UI componentes bots
    ⏱️ Tiempo: 4 horas
    🧪 Test: Suite test pasa al 100%

3.4 DOCUMENTACIÓN SISTEMA BOTS
    📍 Archivo: docs/bots.md (nuevo)
    🎯 Objetivo: Documentación clara funcionamiento
    ✅ Contenido:
        - Cómo crear un bot
        - Cómo interpretar métricas
        - Troubleshooting común
    ⏱️ Tiempo: 2 horas
    🧪 Test: Documentación precisa y útil

📊 DELIVERABLES ETAPA 3:
- ✅ Sistema robusto con error handling
- ✅ Updates tiempo real
- ✅ Tests automatizados básicos
- ✅ Documentación completa

===============================================================================
                      ETAPA 4 - SMARTTRADE MAINTENANCE
                         STATUS: ⏳ PENDIENTE
                         DURACIÓN: Paralelo a otras etapas
                         PRIORIDAD: 📈 BAJA
===============================================================================

🔧 MANTENIMIENTO SMARTTRADE:

4.1 MANTENER FUNCIONALIDAD EXISTENTE
    📍 Archivos: smarttrade/ (todos)
    🎯 Objetivo: No romper funcionalidad actual
    ✅ Acciones: Solo bugfixes críticos, sin nuevas features
    ⏱️ Tiempo: Ad-hoc
    🧪 Test: SmartTrade sigue funcionando

4.2 MEJORAS MENORES UX
    📍 Archivo: pages/SmartTrade.jsx
    🎯 Objetivo: Polish UI existente
    ✅ Funcionalidad: Mejorar responsive, loading states
    ⏱️ Tiempo: 2 horas
    🧪 Test: UX mejorada sin cambios funcionales

4.3 INTEGRACIÓN ANALYTICS MEJORADA
    📍 Archivo: services/smart_trade_service.py
    🎯 Objetivo: Mejor uso analytics/ existente
    ✅ Funcionalidad: Más indicadores, mejor scoring
    ⏱️ Tiempo: 3 horas
    🧪 Test: Señales SmartTrade más precisas

📊 DELIVERABLES ETAPA 4:
- ✅ SmartTrade estable y funcional
- ✅ UX mejorada
- ✅ Analytics integrados

===============================================================================
                              CRONOGRAMA TOTAL
===============================================================================

📅 DÍA 1-4: ETAPA 1 - Fixes Críticos + Deployment (✅ Completa)
📅 DÍA 5: ETAPA 2A.1 - Dashboard Avanzado con Métricas
📅 DÍA 6: ETAPA 2A.2 - TradingView Charts Integration
📅 DÍA 7: ETAPA 2A.3 - Control Dinámico de Parámetros  
📅 DÍA 8: ETAPA 2A.4 - Métricas Avanzadas + Polish
📅 DÍA 9: Testing + Optimización + Deploy

TOTAL ETAPA 2A: 5 días de desarrollo (Bots IA Inteligentes)

===============================================================================
                              PUNTO DE INICIO
===============================================================================

🚀 INICIO CONFIRMADO: ETAPA 2A - BOTS IA INTELIGENTES

📍 PRIMER TASK: Dashboard Avanzado con Métricas Profesionales
📂 ARCHIVO: /Users/eduardguzman/Documents/TRADING/INTELIBOTX/frontend/src/pages/BotsAdvanced.jsx
🎯 OBJETIVO: Crear interfaz superior a 3Commas con métricas avanzadas

⏰ SIGUIENTE ACCIÓN: Implementar dashboard con visualizaciones profesionales

===============================================================================
                                  NOTAS
===============================================================================

✅ ENFOQUE: Test-first con datos simulados/históricos
✅ ESTRUCTURA: Mantener separación intelibotx-api/ e intelibotx-ui/
✅ PRIORIDAD: Bots como frente principal, SmartTrade en mantenimiento
✅ CALIDAD: Cada etapa incluye testing y validación
✅ DOCUMENTACIÓN: Actualizaciones continuas CLAUDE.md

🔄 ITERACIÓN: Plan puede ajustarse según hallazgos durante desarrollo
📝 TRACKING: Todo task con file paths, timeboxing y tests específicos
🎯 OBJETIVO FINAL: Sistema bots completamente funcional con test data

===============================================================================
                                 FIN PLAN
===============================================================================